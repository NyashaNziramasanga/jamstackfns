---
title: 'SendGrid'
description: 'Send an email to a user.'
logo: 'sendgrid.png'
---

import ToggleSwitch from '../../components/ToggleSwitch';

<ToggleSwitch />;

```js
const sendGrid = require('@sendgrid/client');
const {
  SENDGRID_API_KEY,
  SENDGRID_SENDER_EMAIL,
  SENDGRID_SENDER_NAME
} = process.env;

sendGrid.setApiKey(SENDGRID_API_KEY);

export default async (req, res) => {
  const { email } = req.body;

  let response;
  try {
    await await sendGrid.request({
      method: 'POST',
      url: '/v3/contactdb/recipients',
      body: [
        {
          email: email
        }
      ]
    });

    response = await sendGrid.request({
      method: 'POST',
      url: '/v3/mail/send',
      body: {
        from: {
          email: SENDGRID_SENDER_EMAIL,
          name: SENDGRID_SENDER_NAME
        },
        reply_to: {
          email: SENDGRID_SENDER_EMAIL
        },
        personalizations: [
          {
            to: [
              {
                email: email
              }
            ],
            subject: 'Hello, World!'
          }
        ],
        content: [
          {
            type: 'text/plain',
            value: 'Hello, World!'
          }
        ]
      }
    });
  } catch (error) {
    return res.status(error.statusCode || 500).json({ error: error.message });
  }

  return res
    .status(response.statusCode)
    .json({ message: `${email} sent successfully!` });
};
```

```js
const sendGrid = require('@sendgrid/client');
const {
  SENDGRID_API_KEY,
  SENDGRID_SENDER_EMAIL,
  SENDGRID_SENDER_NAME
} = process.env;

sendGrid.setApiKey(SENDGRID_API_KEY);

exports.handler = async (event, context) => {
  const body = JSON.parse(event.body);
  const email = body.email;

  let response;
  try {
    await await sendGrid.request({
      method: 'POST',
      url: '/v3/contactdb/recipients',
      body: [
        {
          email: email
        }
      ]
    });

    response = await sendGrid.request({
      method: 'POST',
      url: '/v3/mail/send',
      body: {
        from: {
          email: SENDGRID_SENDER_EMAIL,
          name: SENDGRID_SENDER_NAME
        },
        reply_to: {
          email: SENDGRID_SENDER_EMAIL
        },
        personalizations: [
          {
            to: [
              {
                email: email
              }
            ],
            subject: 'Hello, World!'
          }
        ],
        content: [
          {
            type: 'text/plain',
            value: 'Hello, World!'
          }
        ]
      }
    });
  } catch (error) {
    return {
      statusCode: error.statusCode || 500,
      body: JSON.stringify({
        error: error.message
      })
    };
  }

  return {
    statusCode: response.statusCode,
    body: JSON.stringify({
      message: `${email} sent successfully!`
    })
  };
};
```
